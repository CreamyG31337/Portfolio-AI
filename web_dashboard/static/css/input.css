@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    body {
        background-color: var(--bg-secondary);
        color: var(--text-primary);
        transition: background-color 0.3s ease, color 0.3s ease;
    }

    input,
    select,
    textarea {
        background-color: var(--bg-tertiary);
        color: var(--text-primary);
        border-color: var(--border-color);
        transition: all 0.2s ease-in-out;
    }

    input:focus,
    select:focus,
    textarea:focus {
        outline: none;
        border-color: var(--color-accent);
        box-shadow: 0 0 0 4px var(--color-accent-ring);
    }

    /* Consistent focus ring for button-like controls across the app */
    button:focus,
    button:focus-visible,
    input[type="button"]:focus,
    input[type="button"]:focus-visible,
    input[type="submit"]:focus,
    input[type="submit"]:focus-visible,
    input[type="reset"]:focus,
    input[type="reset"]:focus-visible,
    a:focus,
    a:focus-visible,
    [role="button"]:focus,
    [role="button"]:focus-visible {
        outline: 2px solid var(--color-accent);
        outline-offset: 2px;
        box-shadow: 0 0 0 4px var(--color-accent-ring);
    }

    /* Placeholder visibility */
    ::placeholder {
        color: var(--text-tertiary);
        opacity: 0.8;
    }

    /* Fix for Chrome/Webkit autofill background forcing white/yellow */
    input:-webkit-autofill,
    input:-webkit-autofill:hover,
    input:-webkit-autofill:focus,
    input:-webkit-autofill:active {
        -webkit-box-shadow: 0 0 0 1000px var(--bg-tertiary) inset !important;
        -webkit-text-fill-color: var(--text-primary) !important;
        transition: background-color 5000s ease-in-out 0s;
    }

    /* Dark mode select icons (dropdown arrow) */
    [data-theme="dark"] select,
    [data-theme="midnight-tokyo"] select,
    [data-theme="abyss"] select,
    .dark select {
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%239ca3af' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
        background-position: right 0.5rem center;
        background-repeat: no-repeat;
        background-size: 1.5em 1.5em;
        padding-right: 2.5rem;
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
    }
}

/* Custom component styles extracted from inline template styles */
@layer components {
    /* Gradient background for header */
    .gradient-bg {
        background-image: linear-gradient(to bottom right, var(--gradient-from), var(--gradient-to));
    }

    /* Sidebar collapse transitions */
    .sidebar-text {
        @apply inline-block transition-all duration-300 ease-in-out;
    }

    .sidebar-content {
        @apply transition-all duration-300 ease-in-out;
    }

    .sidebar-badge {
        @apply transition-opacity duration-300 ease-in-out;
    }

    /* Global outline button hover/ring using currentColor; avoids per-button utility churn. */
    button[class*="bg-transparent"][class*="border"]:not(:disabled):hover,
    a[class*="bg-transparent"][class*="border"]:not([aria-disabled="true"]):hover {
        background-color: color-mix(in srgb, currentColor 10%, transparent);
    }

    button[class*="bg-transparent"][class*="border"]:not(:disabled):focus-visible,
    a[class*="bg-transparent"][class*="border"]:not([aria-disabled="true"]):focus-visible {
        box-shadow: 0 0 0 4px color-mix(in srgb, currentColor 30%, transparent);
    }
}

@layer utilities {
    /* FIX: Sidebar visibility overlap issue */
    @media (min-width: 768px) {
        #sidebar {
            transform: none !important;
        }
    }
}
